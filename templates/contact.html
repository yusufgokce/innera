{% extends "base.html" %}

{% block title %}Contact - Innera{% endblock %}

{% block content %}
<section class="hero">
    <div class="hero-content">
        <h2>Get In Touch</h2>
        <p>Have questions or ready to begin your journey? Send us a message and we'll get back to you soon.</p>
    </div>
</section>

<section class="content-section" style="background: white;">
    <div class="contact-info">
        <p><strong>Email:</strong> hello@inneracounselling.ca</p>
        <p><strong>Phone:</strong> (416) 474-9965</p>

        <form id="contactForm" class="contact-form" style="margin-top: 2rem;">
            <div class="form-row">
                <div class="form-group">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" name="firstName" required>
                </div>
                <div class="form-group">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" name="lastName" required>
                </div>
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
                <label for="message">Message</label>
                <textarea id="message" name="message" rows="6" required></textarea>
            </div>

            <button type="submit" class="cta-button">Send Message</button>

            <div id="formMessage" class="form-message"></div>
        </form>

        <div class="crisis-resources" style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #e8e8e8;">
            <h4 style="font-size: 1.1rem; font-weight: 400; color: #2d2d2d; margin-bottom: 1rem;">Crisis Resources</h4>
            <p style="color: #5a5a5a; line-height: 1.7;">Call <strong>911</strong> if you are in an emergency, immediate danger, or medical distress.</p>
            <p style="color: #5a5a5a; line-height: 1.7;">If you or someone you know is thinking about suicide, call or text <strong><a href="tel:988" style="color: #2d2d2d; text-decoration: none; border-bottom: 1px solid #2d2d2d;">988</a></strong>.</p>
            <p style="color: #5a5a5a; line-height: 1.7;">For other needs, call <strong><a href="tel:211" style="color: #2d2d2d; text-decoration: none; border-bottom: 1px solid #2d2d2d;">211</a></strong> to be connected to mental health and other social services.</p>
            <p style="margin-top: 1rem;"><a href="https://www.toronto.ca/community-people/health-wellness-care/health-programs-advice/mental-health-resources/" target="_blank" rel="noopener noreferrer" style="color: #2d2d2d; text-decoration: none; border-bottom: 1px solid #2d2d2d;">Toronto Mental Health Resources</a></p>
        </div>
    </div>
</section>

<script>
    document.getElementById('contactForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const form = e.target;
        const submitButton = form.querySelector('button[type="submit"]');
        const messageDiv = document.getElementById('formMessage');

        submitButton.disabled = true;
        submitButton.textContent = 'Sending...';
        messageDiv.textContent = '';
        messageDiv.className = 'form-message';

        const formData = new FormData(form);
        const data = {
            firstName: formData.get('firstName'),
            lastName: formData.get('lastName'),
            email: formData.get('email'),
            message: formData.get('message')
        };

        try {
            const response = await fetch('/api/contact', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();

            if (response.ok) {
                messageDiv.textContent = 'Message sent successfully! We\'ll get back to you soon.';
                messageDiv.className = 'form-message success';
                form.reset();
            } else {
                messageDiv.textContent = result.detail || 'Failed to send message. Please try again.';
                messageDiv.className = 'form-message error';
            }
        } catch (error) {
            messageDiv.textContent = 'An error occurred. Please try again later.';
            messageDiv.className = 'form-message error';
        } finally {
            submitButton.disabled = false;
            submitButton.textContent = 'Send Message';
        }
    });
</script>
{% endblock %}
