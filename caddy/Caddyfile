inneracounselling.ca, www.inneracounselling.ca {
    # Auto HTTPS with Let's Encrypt

    # Security headers
    header {
        X-Frame-Options "SAMEORIGIN"
        X-Content-Type-Options "nosniff"
        X-XSS-Protection "1; mode=block"
        Referrer-Policy "no-referrer-when-downgrade"
    }

    # Gzip compression
    encode gzip

    # Proxy to FastAPI app
    reverse_proxy web:8000 {
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }

    # Static file caching
    @static {
        path /static/*
    }
    header @static Cache-Control "public, max-age=2592000, immutable"

    # Logs
    log {
        output file /var/log/caddy/access.log
    }
}
